<!DOCTYPE html>
<html lang="it">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Foodybank - Onboarding</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            color: #333;
            overflow-x: hidden;
        }

        .container {
            max-width: 375px;
            margin: 0 auto;
            background: #fff;
            min-height: 100vh;
            position: relative;
            box-shadow: 0 0 20px rgba(0,0,0,0.1);
        }

        /* Onboarding Screens */
        .onboarding-screen {
            display: none;
            min-height: 100vh;
            padding: 40px 30px;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            text-align: center;
            animation: fadeIn 0.5s ease-out;
        }

        .onboarding-screen.active {
            display: flex;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .onboarding-icon {
            font-size: 80px;
            margin-bottom: 30px;
            animation: bounce 1s ease-in-out;
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        .onboarding-title {
            font-size: 28px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
            line-height: 1.3;
        }

        .onboarding-subtitle {
            font-size: 16px;
            color: #666;
            line-height: 1.6;
            margin-bottom: 40px;
        }

        .btn-primary {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
            padding: 15px 40px;
            border-radius: 25px;
            font-weight: bold;
            cursor: pointer;
            width: 100%;
            max-width: 300px;
            font-size: 16px;
            transition: transform 0.2s;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.3);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #f8f9fa;
            border: 1px solid #ddd;
            padding: 12px 30px;
            border-radius: 20px;
            cursor: pointer;
            text-align: center;
            transition: background 0.2s;
            color: #666;
            font-size: 14px;
            margin-top: 10px;
        }

        .btn-secondary:hover {
            background: #e9ecef;
        }

        /* Choice Options Screen */
        .choice-options {
            display: flex;
            flex-direction: column;
            gap: 15px;
            width: 100%;
            max-width: 300px;
        }

        .choice-card {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 15px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s;
            display: flex;
            align-items: center;
            gap: 15px;
        }

        .choice-card:hover {
            border-color: #4CAF50;
            background: #f8fff8;
            transform: translateX(5px);
        }

        .choice-icon {
            font-size: 32px;
        }

        .choice-text {
            text-align: left;
            font-weight: 600;
            color: #333;
        }

        .choice-hint {
            font-size: 12px;
            color: #999;
            margin-top: 20px;
        }

        /* Camera Screen */
        .camera-container {
            width: 100%;
            max-width: 300px;
            height: 300px;
            background: #f0f0f0;
            border-radius: 15px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 30px;
            border: 3px dashed #4CAF50;
            position: relative;
            overflow: hidden;
        }

        .camera-placeholder {
            text-align: center;
            color: #999;
        }

        .camera-icon {
            font-size: 48px;
            margin-bottom: 10px;
        }

        .photo-preview {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }

        .capture-btn {
            width: 70px;
            height: 70px;
            border-radius: 50%;
            background: white;
            border: 5px solid #4CAF50;
            cursor: pointer;
            transition: transform 0.2s;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 24px;
        }

        .capture-btn:hover {
            transform: scale(1.1);
        }

        /* Processing Animation */
        .processing {
            display: flex;
            flex-direction: column;
            align-items: center;
            gap: 20px;
        }

        .spinner {
            width: 50px;
            height: 50px;
            border: 5px solid #f3f3f3;
            border-top: 5px solid #4CAF50;
            border-radius: 50%;
            animation: spin 1s linear infinite;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Products List */
        .products-list {
            width: 100%;
            max-width: 300px;
            background: #f8fff8;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .product-item {
            display: flex;
            align-items: center;
            gap: 12px;
            padding: 12px 0;
            border-bottom: 1px solid #e0e0e0;
            font-size: 16px;
        }

        .product-item:last-child {
            border-bottom: none;
        }

        .product-emoji {
            font-size: 24px;
        }

        .product-count {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 8px 16px;
            border-radius: 20px;
            font-weight: bold;
            margin-bottom: 20px;
        }

        .points-badge {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            color: white;
            padding: 15px 25px;
            border-radius: 25px;
            font-size: 24px;
            font-weight: bold;
            margin: 20px 0;
            display: inline-block;
            animation: pulse 0.5s ease-in-out;
        }

        @keyframes pulse {
            0%, 100% { transform: scale(1); }
            50% { transform: scale(1.1); }
        }

        /* Benefits List */
        .benefits-list {
            text-align: left;
            margin: 20px 0;
            max-width: 300px;
        }

        .benefit-item {
            display: flex;
            align-items: center;
            gap: 10px;
            padding: 10px 0;
            font-size: 16px;
            color: #333;
        }

        .benefit-icon {
            font-size: 20px;
        }

        /* Auth Buttons */
        .auth-buttons {
            display: flex;
            flex-direction: column;
            gap: 12px;
            width: 100%;
            max-width: 300px;
        }

        .auth-btn {
            display: flex;
            align-items: center;
            justify-content: center;
            gap: 10px;
            padding: 12px 20px;
            border-radius: 25px;
            font-weight: 600;
            cursor: pointer;
            transition: transform 0.2s;
            border: 2px solid #e0e0e0;
            background: white;
        }

        .auth-btn:hover {
            transform: translateY(-2px);
        }

        .auth-btn-email {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            border: none;
        }

        .auth-btn-apple {
            background: #000;
            color: white;
            border: none;
        }

        .skip-link {
            margin-top: 20px;
            color: #999;
            font-size: 14px;
            cursor: pointer;
            text-decoration: none;
        }

        .skip-link:hover {
            color: #666;
        }

        /* Warning Box */
        .warning-box {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin: 20px 0;
            max-width: 300px;
        }

        .warning-text {
            color: #856404;
            font-size: 14px;
            line-height: 1.5;
        }

        /* Main App (from previous prototype) */
        .main-app {
            display: none;
        }

        .main-app.active {
            display: block;
        }

        .header {
            background: linear-gradient(135deg, #4CAF50 0%, #45a049 100%);
            color: white;
            padding: 20px;
            text-align: center;
            border-radius: 0 0 20px 20px;
        }

        .streak-badge {
            background: rgba(255,255,255,0.2);
            padding: 10px 15px;
            border-radius: 25px;
            margin: 10px 0;
            display: inline-block;
            font-size: 16px;
            font-weight: bold;
        }

        .points-level {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-top: 10px;
        }

        .points {
            font-size: 14px;
        }

        .level {
            background: rgba(255,255,255,0.3);
            padding: 5px 10px;
            border-radius: 15px;
            font-size: 12px;
        }

        .main-content {
            padding: 20px;
            padding-bottom: 100px;
        }

        .mission-card {
            background: #fff;
            border: 2px solid #4CAF50;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
            box-shadow: 0 4px 15px rgba(76, 175, 80, 0.1);
        }

        .mission-header {
            display: flex;
            align-items: center;
            margin-bottom: 15px;
        }

        .mission-icon {
            font-size: 24px;
            margin-right: 10px;
        }

        .mission-title {
            font-size: 18px;
            font-weight: bold;
            color: #4CAF50;
        }

        .mission-description {
            color: #666;
            margin-bottom: 15px;
            line-height: 1.4;
        }

        .alert-card {
            background: #fff3cd;
            border: 1px solid #ffeaa7;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
        }

        .alert-title {
            font-weight: bold;
            color: #856404;
            margin-bottom: 10px;
            display: flex;
            align-items: center;
        }

        .alert-icon {
            margin-right: 8px;
        }

        .food-list {
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .food-item {
            display: flex;
            align-items: center;
            padding: 8px 0;
        }

        .food-emoji {
            margin-right: 10px;
            font-size: 18px;
        }

        .stats-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 20px;
        }

        .stats-title {
            font-weight: bold;
            margin-bottom: 15px;
            display: flex;
            align-items: center;
        }

        .stats-grid {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 15px;
        }

        .stat-item {
            text-align: center;
        }

        .stat-value {
            font-size: 16px;
            font-weight: bold;
        }

        .stat-label {
            font-size: 12px;
            opacity: 0.9;
        }

        .tab-bar {
            position: fixed;
            bottom: 0;
            left: 50%;
            transform: translateX(-50%);
            max-width: 375px;
            width: 100%;
            background: white;
            border-top: 1px solid #eee;
            display: flex;
            justify-content: around;
            padding: 10px 0;
            z-index: 100;
        }

        .tab {
            display: flex;
            flex-direction: column;
            align-items: center;
            padding: 8px;
            text-decoration: none;
            color: #999;
            font-size: 12px;
            flex: 1;
            transition: color 0.2s;
        }

        .tab.active {
            color: #4CAF50;
        }

        .tab-icon {
            font-size: 20px;
            margin-bottom: 4px;
        }

        .hidden {
            display: none !important;
        }

        /* Modal Styles */
        .modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: rgba(0,0,0,0.5);
            z-index: 1000;
            align-items: center;
            justify-content: center;
        }

        .modal.active {
            display: flex;
        }

        .modal-content {
            background: white;
            max-width: 320px;
            width: 90%;
            border-radius: 15px;
            padding: 30px 20px;
            text-align: center;
            animation: modalSlide 0.3s ease-out;
        }

        @keyframes modalSlide {
            from { transform: translateY(-50px); opacity: 0; }
            to { transform: translateY(0); opacity: 1; }
        }

        .modal-icon {
            font-size: 48px;
            margin-bottom: 15px;
        }

        .modal-title {
            font-size: 20px;
            font-weight: bold;
            margin-bottom: 10px;
            color: #4CAF50;
        }

        .modal-text {
            color: #666;
            margin-bottom: 20px;
            line-height: 1.4;
        }

        .points-earned {
            background: linear-gradient(135deg, #ffd700 0%, #ffb347 100%);
            color: white;
            padding: 10px 20px;
            border-radius: 25px;
            font-weight: bold;
            margin: 15px 0;
            display: inline-block;
        }

        .photo-upload {
            border: 2px dashed #4CAF50;
            border-radius: 10px;
            padding: 30px;
            text-align: center;
            cursor: pointer;
            margin: 15px 0;
            transition: background 0.2s;
        }

        .photo-upload:hover {
            background: #f8fff8;
        }

        .photo-upload input {
            display: none;
        }

        .recipe-grid {
            display: grid;
            gap: 15px;
            margin: 15px 0;
        }

        .recipe-card {
            border: 1px solid #ddd;
            border-radius: 10px;
            padding: 15px;
            cursor: pointer;
            transition: border-color 0.2s;
        }

        .recipe-card:hover, .recipe-card.selected {
            border-color: #4CAF50;
            background: #f8fff8;
        }

        .recipe-title {
            font-weight: bold;
            margin-bottom: 5px;
        }

        .recipe-ingredients {
            color: #666;
            font-size: 14px;
        }

        .action-buttons {
            display: flex;
            gap: 10px;
            margin: 15px 0;
        }

        .ad-banner {
            background: linear-gradient(135deg, #ff9a9e 0%, #fecfef 100%);
            color: #333;
            text-align: center;
            padding: 15px;
            border-radius: 10px;
            margin: 15px 0;
            position: relative;
        }

        .ad-skip {
            position: absolute;
            top: 5px;
            right: 10px;
            background: rgba(0,0,0,0.2);
            color: white;
            border: none;
            padding: 2px 8px;
            border-radius: 10px;
            font-size: 10px;
            cursor: pointer;
        }

        .loading {
            text-align: center;
            padding: 20px;
            color: #666;
        }

        .success-animation {
            animation: bounceAnim 0.6s ease-out;
        }

        @keyframes bounceAnim {
            0%, 20%, 60%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            80% { transform: translateY(-5px); }
        }

        /* HYBRID MODEL - NEW STYLES */

        /* Header Fisso */
        .header-fixed {
            position: sticky;
            top: 0;
            background: white;
            padding: 12px 20px;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
            z-index: 90;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .streak-info {
            font-size: 14px;
            font-weight: bold;
            color: #333;
        }

        .points-info {
            font-size: 14px;
            color: #666;
        }

        /* Mission Suggerita */
        .mission-suggested {
            background: linear-gradient(135deg, #FFF9E6 0%, #FFE5B4 100%);
            border: 3px solid #FFD700;
            position: relative;
            cursor: pointer;
            transition: transform 0.2s;
        }

        .mission-suggested:hover {
            transform: translateY(-2px);
        }

        .suggested-badge {
            position: absolute;
            top: 10px;
            right: 10px;
            background: linear-gradient(135deg, #FFD700 0%, #FFA500 100%);
            color: white;
            padding: 4px 12px;
            border-radius: 15px;
            font-size: 11px;
            font-weight: bold;
        }

        .mission-reward-inline {
            color: #4CAF50;
            font-weight: bold;
            font-size: 14px;
        }

        /* Products Pills */
        .products-pills {
            display: flex;
            flex-wrap: wrap;
            gap: 8px;
            margin: 15px 0;
        }

        .product-pill {
            background: white;
            border: 2px solid #FFA500;
            padding: 8px 16px;
            border-radius: 20px;
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        /* Section Title */
        .section-title {
            font-size: 18px;
            font-weight: bold;
            color: #333;
            margin-bottom: 15px;
        }

        /* Altre Missioni */
        .other-missions {
            margin: 20px 0;
        }

        .mission-card-small {
            background: white;
            border: 2px solid #e0e0e0;
            border-radius: 12px;
            padding: 16px;
            margin-bottom: 12px;
            display: flex;
            align-items: center;
            gap: 12px;
            cursor: pointer;
            transition: all 0.2s;
            min-height: 44px;
        }

        .mission-card-small:hover {
            border-color: #4CAF50;
            background: #f8fff8;
            transform: translateX(4px);
        }

        .mission-card-small:active {
            transform: scale(0.98);
        }

        .mission-emoji {
            font-size: 28px;
        }

        .mission-name {
            flex: 1;
            font-size: 16px;
            font-weight: 600;
            color: #333;
        }

        .mission-points {
            font-size: 14px;
            font-weight: bold;
            color: #4CAF50;
        }

        /* Daily Stats */
        .daily-stats {
            background: linear-gradient(135deg, #E8F5E9 0%, #C8E6C9 100%);
            border-radius: 12px;
            padding: 16px;
            margin: 20px 0;
            text-align: center;
        }

        .stats-title-small {
            font-size: 16px;
            font-weight: bold;
            color: #333;
            margin-bottom: 12px;
        }

        .stats-row {
            display: flex;
            justify-content: center;
            gap: 24px;
        }

        .stat-item-small {
            font-size: 14px;
            font-weight: 600;
            color: #333;
        }

        /* Placeholder Screens */
        .placeholder-screen {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: white;
            z-index: 200;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .placeholder-content {
            max-width: 320px;
            text-align: center;
            padding: 30px;
        }

        .placeholder-icon {
            font-size: 80px;
            margin-bottom: 20px;
        }

        .placeholder-title {
            font-size: 24px;
            font-weight: bold;
            color: #333;
            margin-bottom: 12px;
        }

        .placeholder-text {
            font-size: 18px;
            color: #666;
            margin-bottom: 20px;
        }

        .placeholder-desc {
            font-size: 14px;
            color: #999;
            margin-bottom: 30px;
            line-height: 1.5;
        }

        /* Responsive & Touch Targets */
        @media (min-width: 320px) {
            .mission-card-small,
            .btn-primary,
            .btn-secondary {
                min-height: 44px;
            }
        }

        /* Main content padding for fixed header */
        .main-app .main-content {
            padding-top: 20px;
            padding-bottom: 100px;
        }
    </style>
</head>
<body>
    <div class="container">
        <!-- SCREEN 1: Hook Emotivo -->
        <div class="onboarding-screen active" id="screen1">
            <div class="onboarding-icon">üóëÔ∏è</div>
            <h1 class="onboarding-title">Quante cose butti perch√© te ne dimentichi?</h1>
            <p class="onboarding-subtitle">Foodybank ti aiuta a usare quello che hai prima che sia troppo tardi</p>
            <button class="btn-primary" onclick="nextScreen(2)">Continua ‚Üí</button>
        </div>

        <!-- SCREEN 2: Rimozione Paura -->
        <div class="onboarding-screen" id="screen2">
            <div class="onboarding-icon">‚úã</div>
            <h1 class="onboarding-title">Non devi inserire tutto</h1>
            <p class="onboarding-subtitle">Niente liste infinite. Niente lavoro noioso. Puoi iniziare con una sola azione.</p>
            <button class="btn-primary" onclick="nextScreen(3)">Ok, fammi vedere ‚Üí</button>
        </div>

        <!-- SCREEN 3: Scelta Pigra -->
        <div class="onboarding-screen" id="screen3">
            <h1 class="onboarding-title">Come vuoi iniziare?</h1>
            <div class="choice-options">
                <div class="choice-card" onclick="selectChoice('photo')">
                    <div class="choice-icon">üì∏</div>
                    <div class="choice-text">Scatta una foto al frigo</div>
                </div>
                <div class="choice-card" onclick="selectChoice('receipt')">
                    <div class="choice-icon">üßæ</div>
                    <div class="choice-text">Carica uno scontrino</div>
                </div>
                <div class="choice-card" onclick="selectChoice('voice')">
                    <div class="choice-icon">üéôÔ∏è</div>
                    <div class="choice-text">Dimmi cosa hai comprato</div>
                </div>
            </div>
            <p class="choice-hint">‚ö° Bastano 10 secondi</p>
        </div>

        <!-- SCREEN 4: Camera / Action -->
        <div class="onboarding-screen" id="screen4">
            <h1 class="onboarding-title">Scatta una foto</h1>
            <div class="camera-container" id="cameraView">
                <div class="camera-placeholder">
                    <div class="camera-icon">üì∑</div>
                    <div>Inquadra il tuo frigo</div>
                </div>
            </div>
            <div class="capture-btn" onclick="capturePhoto()">üì∏</div>
        </div>

        <!-- SCREEN 4b: Processing -->
        <div class="onboarding-screen" id="screen4b">
            <div class="processing">
                <div class="spinner"></div>
                <p class="onboarding-subtitle">üîÑ Riconosciamo i prodotti...</p>
            </div>
        </div>

        <!-- SCREEN 5: Risultato + Prodotti -->
        <div class="onboarding-screen" id="screen5">
            <div class="onboarding-icon">‚úÖ</div>
            <h1 class="onboarding-title">Riconoscimento completato!</h1>
            <p class="onboarding-subtitle">Ecco cosa hai:</p>
            
            <div class="products-list">
                <div class="product-item">
                    <span class="product-emoji">ü•õ</span>
                    <span>Latte</span>
                </div>
                <div class="product-item">
                    <span class="product-emoji">ü•ö</span>
                    <span>Uova</span>
                </div>
                <div class="product-item">
                    <span class="product-emoji">üçÖ</span>
                    <span>Pomodori</span>
                </div>
                <div class="product-item">
                    <span class="product-emoji">üßÄ</span>
                    <span>Mozzarella</span>
                </div>
                <div class="product-item">
                    <span class="product-emoji">üçù</span>
                    <span>Pasta</span>
                </div>
            </div>

            <div class="product-count">5 prodotti riconosciuti</div>
            
            <div class="points-badge">+25 punti! üéâ</div>
            
            <button class="btn-primary" onclick="nextScreen(6)">Salva e continua ‚Üí</button>
        </div>

        <!-- SCREEN 6: Registration -->
        <div class="onboarding-screen" id="screen6">
            <div class="onboarding-icon">üéâ</div>
            <h1 class="onboarding-title">Ottimo inizio!</h1>
            
            <div class="benefits-list">
                <div class="benefit-item">
                    <span class="benefit-icon">‚Ä¢</span>
                    <span>25 punti</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">‚Ä¢</span>
                    <span>5 prodotti tracciati</span>
                </div>
                <div class="benefit-item">
                    <span class="benefit-icon">‚Ä¢</span>
                    <span>La tua prima mission ti aspetta</span>
                </div>
            </div>

            <div class="warning-box">
                <p class="warning-text">üíæ Devi creare un account per continuare</p>
            </div>

            <div class="auth-buttons">
                <div class="auth-btn auth-btn-email" onclick="createAccount('email')">
                    üìß Continua con Email
                </div>
                <div class="auth-btn auth-btn-apple" onclick="createAccount('apple')">
                    üçé Continua con Apple
                </div>
                <div class="auth-btn" onclick="createAccount('google')">
                    <span style="color: #4285F4;">G</span> Continua con Google
                </div>
            </div>

        </div>

        <!-- SCREEN 7: Notifiche -->
        <div class="onboarding-screen" id="screen7">
            <div class="onboarding-icon">üî•</div>
            <h1 class="onboarding-title">Un'ultima cosa importante</h1>
            <p class="onboarding-subtitle" style="font-weight: 600;">Il segreto √® lo STREAK</p>
            
            <div class="benefits-list">
                <div class="benefit-item">
                    <span class="benefit-icon">üì≤</span>
                    <span>Una notifica al giorno ti ricorda la mission (30 secondi)</span>
                </div>
            </div>

            <div class="warning-box">
                <p class="warning-text">Senza notifiche = Dimentichi = Perdi lo streak</p>
            </div>

            <button class="btn-primary" onclick="enableNotifications()">üîî Attiva notifiche</button>
        </div>

        <!-- MAIN APP (from previous prototype) -->
        <div class="main-app" id="mainApp">
            <!-- Header Originale -->
            <div class="header">
                <h1>üçΩÔ∏è Foodybank</h1>
                <div class="streak-badge" id="streakBadge">
                    üî• Streak: <span id="streakCount">1</span> giorni
                </div>
                <div class="points-level">
                    <div class="points">‚≠ê <span id="pointsCount">30</span> punti</div>
                    <div class="level" id="userLevel">Novizio</div>
                </div>
            </div>

            <div class="main-content">
                <!-- 1. MISSION SUGGERITA (Chef di oggi) -->
                <div class="mission-card mission-suggested" onclick="startChefMission()">
                    <div class="suggested-badge">üåü SUGGERITA</div>
                    <div class="mission-header">
                        <div class="mission-icon">üë®‚Äçüç≥</div>
                        <div class="mission-title">Chef di oggi</div>
                    </div>
                    <div class="mission-description">
                        Hai 5 ingredienti pronti! <span class="mission-reward-inline">+30pt</span>
                    </div>
                    <button class="btn-primary" onclick="event.stopPropagation(); startMission()">INIZIA MISSION</button>
                </div>

                <!-- 2. DA USARE PRIMA -->
                <div class="alert-card">
                    <div class="alert-title">
                        <span class="alert-icon">‚ö†Ô∏è</span>
                        DA USARE PRIMA
                    </div>
                    <div class="products-pills">
                        <span class="product-pill">üßÄ Mozzarella</span>
                        <span class="product-pill">üçÖ Pomodori</span>
                        <span class="product-pill">ü•õ Latte</span>
                    </div>
                    <button class="btn-secondary" onclick="suggestRecipe()">COSA CUCINO?</button>
                </div>

                <!-- 3. ALTRE MISSIONI -->
                <div class="other-missions">
                    <h3 class="section-title">‚ö° ALTRE MISSIONI</h3>
                    <div class="mission-card-small" onclick="openPlaceholder('scatta')">
                        <span class="mission-emoji">üì∏</span>
                        <span class="mission-name">Scatta & Scopri</span>
                        <span class="mission-points">+20pt</span>
                    </div>
                    <div class="mission-card-small" onclick="openPlaceholder('spesa')">
                        <span class="mission-emoji">üßæ</span>
                        <span class="mission-name">Spesa Smart</span>
                        <span class="mission-points">+25pt</span>
                    </div>
                    <div class="mission-card-small" onclick="openPlaceholder('zero')">
                        <span class="mission-emoji">‚ö†Ô∏è</span>
                        <span class="mission-name">Zero Spreco</span>
                        <span class="mission-points">+10pt</span>
                    </div>
                    <div class="mission-card-small" onclick="openPlaceholder('frigo')">
                        <span class="mission-emoji">‚úÖ</span>
                        <span class="mission-name">Frigo Check</span>
                        <span class="mission-points">+5pt</span>
                    </div>
                </div>

                <!-- 4. STATS COMPLETE -->
                <div class="stats-card">
                    <div class="stats-title">
                        <span style="margin-right: 8px;">üíö</span>
                        I TUOI NUMERI
                    </div>
                    <div class="stats-grid">
                        <div class="stat-item">
                            <div class="stat-value">üåç 0.2kg</div>
                            <div class="stat-label">CO2 salvata</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">üí∞ ‚Ç¨5</div>
                            <div class="stat-label">Risparmiati</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">üçΩÔ∏è 0</div>
                            <div class="stat-label">Ricette</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-value">‚ö° 1</div>
                            <div class="stat-label">Giorni streak</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Tab Bar -->
            <div class="tab-bar">
                <a href="#" class="tab active">
                    <div class="tab-icon">üè†</div>
                    Home
                </a>
                <a href="#" class="tab" onclick="alert('Missioni extra coming soon! üéØ')">
                    <div class="tab-icon">üéØ</div>
                    Missioni
                </a>
                <a href="#" class="tab" onclick="alert('Stats dettagliate coming soon! üìä')">
                    <div class="tab-icon">üìä</div>
                    Stats
                </a>
                <a href="#" class="tab" onclick="alert('Profilo coming soon! üë§')">
                    <div class="tab-icon">üë§</div>
                    Profilo
                </a>
            </div>
        </div>

        <!-- Modal per Mission Photo -->
        <div class="modal" id="photoMissionModal">
            <div class="modal-content">
                <div class="modal-icon">üì∏</div>
                <div class="modal-title">Scatta & Scopri</div>
                <div class="modal-text">Scatta una foto del tuo frigo per scoprire cosa hai e ricevere suggerimenti personalizzati!</div>

                <div class="photo-upload" onclick="document.getElementById('photoInput').click()">
                    <div style="font-size: 32px; margin-bottom: 10px;">üì∑</div>
                    <div>Tocca per scattare foto</div>
                    <input type="file" id="photoInput" accept="image/*" onchange="processPhoto()">
                </div>

                <div id="photoResult" class="hidden">
                    <div class="loading">üîÑ Analizziamo la tua foto...</div>
                </div>

                <button class="btn-primary" onclick="closeModal('photoMissionModal')" style="margin-top: 15px;">
                    CHIUDI
                </button>
            </div>
        </div>

        <!-- Modal per Recipe Suggestion -->
        <div class="modal" id="recipeSuggestionModal">
            <div class="modal-content">
                <div class="modal-icon">üë®‚Äçüç≥</div>
                <div class="modal-title">Ricette Consigliate</div>
                <div class="modal-text">Perfette per usare i tuoi ingredienti prima che scadano!</div>

                <div class="recipe-grid" id="recipeGrid">
                    <div class="recipe-card" onclick="selectRecipe(this, 'caprese')">
                        <div class="recipe-title">üçÖ Insalata Caprese</div>
                        <div class="recipe-ingredients">Mozzarella, Pomodori, Basilico</div>
                    </div>
                    <div class="recipe-card" onclick="selectRecipe(this, 'pasta')">
                        <div class="recipe-title">üçù Pasta al Pomodoro</div>
                        <div class="recipe-ingredients">Pomodori, Pasta, Aglio</div>
                    </div>
                    <div class="recipe-card" onclick="selectRecipe(this, 'pizza')">
                        <div class="recipe-title">üçï Pizza Margherita</div>
                        <div class="recipe-ingredients">Mozzarella, Pomodori, Farina</div>
                    </div>
                </div>

                <button class="btn-primary" onclick="confirmRecipe()" id="confirmRecipeBtn" style="opacity: 0.5;" disabled>
                    CUCINO QUESTA! üç¥
                </button>

                <button class="btn-secondary" onclick="closeModal('recipeSuggestionModal')" style="margin-top: 10px; width: 100%;">
                    CHIUDI
                </button>
            </div>
        </div>

        <!-- Modal per Mission Completata -->
        <div class="modal" id="missionCompleteModal">
            <div class="modal-content">
                <div class="modal-icon success-animation">üéâ</div>
                <div class="modal-title">Mission Completata!</div>
                <div class="modal-text">Ottimo lavoro! Hai guadagnato punti e mantenuto il tuo streak.</div>

                <div class="points-earned" id="pointsEarned">
                    +30 punti
                </div>

                <!-- Simulazione Ad -->
                <div class="ad-banner">
                    <button class="ad-skip" onclick="skipAd()">Salta (3s)</button>
                    <div style="font-size: 16px; font-weight: bold; margin-bottom: 5px;">ü•ó HelloFresh</div>
                    <div style="font-size: 12px;">Ricette fresche consegnate a casa tua!</div>
                </div>

                <button class="btn-primary" onclick="closeMissionComplete()">
                    FANTASTICO!
                </button>
            </div>
        </div>

        <!-- Modal Zero Spreco -->
        <div class="modal" id="zeroWasteModal">
            <div class="modal-content">
                <div class="modal-icon">üéØ</div>
                <div class="modal-title">Zero Spreco</div>
                <div class="modal-text">Questi prodotti stanno per scadere. Come li hai usati?</div>

                <div class="food-list" style="margin: 20px 0;">
                    <div class="food-item">
                        <span class="food-emoji">üßÄ</span>
                        <span>Mozzarella</span>
                    </div>
                </div>

                <div class="action-buttons">
                    <button class="btn-secondary" onclick="markFood('used')">‚úÖ Usato</button>
                    <button class="btn-secondary" onclick="markFood('wasted')">üóëÔ∏è Buttato</button>
                    <button class="btn-secondary" onclick="markFood('good')">‚è∞ Ancora buono</button>
                </div>

                <button class="btn-primary" onclick="closeModal('zeroWasteModal')" style="margin-top: 15px;">
                    CHIUDI
                </button>
            </div>
        </div>

        <!-- PLACEHOLDER SCREENS -->
        <div class="placeholder-screen hidden" id="placeholder-scatta">
            <div class="placeholder-content">
                <div class="placeholder-icon">üì∏</div>
                <h2 class="placeholder-title">Scatta & Scopri</h2>
                <p class="placeholder-text">Questa mission sar√† disponibile presto!</p>
                <p class="placeholder-desc">Scatta una foto del tuo frigo e scopri cosa puoi cucinare.</p>
                <button class="btn-primary" onclick="goBackHome()">‚Üê Torna alla Home</button>
            </div>
        </div>

        <div class="placeholder-screen hidden" id="placeholder-spesa">
            <div class="placeholder-content">
                <div class="placeholder-icon">üßæ</div>
                <h2 class="placeholder-title">Spesa Smart</h2>
                <p class="placeholder-text">Questa mission sar√† disponibile presto!</p>
                <p class="placeholder-desc">Carica lo scontrino della spesa e traccia i tuoi acquisti.</p>
                <button class="btn-primary" onclick="goBackHome()">‚Üê Torna alla Home</button>
            </div>
        </div>

        <div class="placeholder-screen hidden" id="placeholder-zero">
            <div class="placeholder-content">
                <div class="placeholder-icon">‚ö†Ô∏è</div>
                <h2 class="placeholder-title">Zero Spreco</h2>
                <p class="placeholder-text">Questa mission sar√† disponibile presto!</p>
                <p class="placeholder-desc">Verifica cosa hai usato e cosa √® andato sprecato.</p>
                <button class="btn-primary" onclick="goBackHome()">‚Üê Torna alla Home</button>
            </div>
        </div>

        <div class="placeholder-screen hidden" id="placeholder-frigo">
            <div class="placeholder-content">
                <div class="placeholder-icon">‚úÖ</div>
                <h2 class="placeholder-title">Frigo Check</h2>
                <p class="placeholder-text">Questa mission sar√† disponibile presto!</p>
                <p class="placeholder-desc">Controlla velocemente cosa hai in frigo.</p>
                <button class="btn-primary" onclick="goBackHome()">‚Üê Torna alla Home</button>
            </div>
        </div>
    </div>

    <script>
        let currentScreen = 1;
        let selectedChoice = null;

        function nextScreen(screenNumber) {
            // Hide current screen
            document.getElementById(`screen${currentScreen}`).classList.remove('active');
            
            // Show next screen
            currentScreen = screenNumber;
            document.getElementById(`screen${screenNumber}`).classList.add('active');
        }

        function selectChoice(choice) {
            selectedChoice = choice;
            
            if (choice === 'photo') {
                nextScreen(4);
            } else if (choice === 'receipt') {
                alert('üßæ Carica scontrino - Coming soon!\n\nPer ora prova con la foto del frigo üì∏');
            } else if (choice === 'voice') {
                alert('üéôÔ∏è Input vocale - Coming soon!\n\nPer ora prova con la foto del frigo üì∏');
            }
        }

        function capturePhoto() {
            // Simulate photo capture
            const cameraView = document.getElementById('cameraView');
            cameraView.innerHTML = '<div style="font-size: 48px;">üì∏</div><div>Foto scattata!</div>';
            
            // Show processing screen
            setTimeout(() => {
                nextScreen('4b');
                
                // Show results after "processing"
                setTimeout(() => {
                    nextScreen(5);
                }, 2500);
            }, 1000);
        }

        function createAccount(method) {
            // Simulate account creation
            alert(`‚úÖ Account creato con ${method === 'email' ? 'Email' : method === 'apple' ? 'Apple' : 'Google'}!\n\nBenvenuto in Foodybank! üéâ`);
            nextScreen(7);
        }

        function enableNotifications() {
            // Simulate notification permission request
            if ('Notification' in window) {
                Notification.requestPermission().then(permission => {
                    if (permission === 'granted') {
                        alert('üîî Notifiche attivate!\n\nTi ricorderemo la tua mission quotidiana. üéØ');
                    }
                    showMainApp();
                });
            } else {
                alert('üîî Notifiche attivate!\n\nTi ricorderemo la tua mission quotidiana. üéØ');
                showMainApp();
            }
        }

        function showMainApp() {
            // Hide onboarding
            document.getElementById('screen7').classList.remove('active');
            
            // Show main app with animation
            const mainApp = document.getElementById('mainApp');
            mainApp.style.opacity = '0';
            mainApp.classList.add('active');
            
            setTimeout(() => {
                mainApp.style.transition = 'opacity 0.5s';
                mainApp.style.opacity = '1';
            }, 100);

            // Celebration
            setTimeout(() => {
                alert('üéâ Benvenuto in Foodybank!\n\nHai completato il tuo primo setup.\nOra completa la tua prima mission quotidiana! üéØ');
            }, 1000);
        }

        // Main App Functions
        let appState = {
            streak: 1,
            points: 25,
            level: "Novizio",
            selectedRecipe: null,
            missionCompleted: false
        };

        function updateUI() {
            const streakEl = document.getElementById('streakCount');
            const pointsEl = document.getElementById('pointsCount');
            const levelEl = document.getElementById('userLevel');
            if (streakEl) streakEl.textContent = appState.streak;
            if (pointsEl) pointsEl.textContent = appState.points;
            if (levelEl) levelEl.textContent = appState.level;
        }

        function startMission() {
            const missions = ['photo', 'recipe', 'zeroWaste'];
            const randomMission = missions[Math.floor(Math.random() * missions.length)];

            switch(randomMission) {
                case 'photo':
                    showModal('photoMissionModal');
                    break;
                case 'recipe':
                    showModal('recipeSuggestionModal');
                    break;
                case 'zeroWaste':
                    showModal('zeroWasteModal');
                    break;
            }
        }

        function suggestRecipe() {
            showModal('recipeSuggestionModal');
        }

        function showModal(modalId) {
            document.getElementById(modalId).classList.add('active');
        }

        function closeModal(modalId) {
            document.getElementById(modalId).classList.remove('active');
        }

        function processPhoto() {
            const fileInput = document.getElementById('photoInput');
            if (fileInput.files.length > 0) {
                document.getElementById('photoResult').classList.remove('hidden');

                setTimeout(() => {
                    document.getElementById('photoResult').innerHTML = `
                        <div style="color: #4CAF50; font-weight: bold; margin-bottom: 10px;">
                            ‚úÖ Foto elaborata con successo!
                        </div>
                        <div style="font-size: 14px; color: #666;">
                            Trovati: Mozzarella, Pomodori, Latte, Uova, Yogurt
                        </div>
                    `;

                    setTimeout(() => {
                        completeMission(25);
                    }, 1500);
                }, 2000);
            }
        }

        function selectRecipe(element, recipeId) {
            document.querySelectorAll('.recipe-card').forEach(card => {
                card.classList.remove('selected');
            });

            element.classList.add('selected');
            appState.selectedRecipe = recipeId;

            const btn = document.getElementById('confirmRecipeBtn');
            btn.disabled = false;
            btn.style.opacity = '1';
        }

        function confirmRecipe() {
            if (appState.selectedRecipe) {
                closeModal('recipeSuggestionModal');
                setTimeout(() => {
                    completeMission(35);
                }, 500);
            }
        }

        function markFood(action) {
            let points = 0;

            switch(action) {
                case 'used':
                    points = 40;
                    break;
                case 'wasted':
                    points = 10;
                    break;
                case 'good':
                    points = 20;
                    break;
            }

            closeModal('zeroWasteModal');
            setTimeout(() => {
                completeMission(points);
            }, 500);
        }

        function completeMission(points) {
            closeModal('photoMissionModal');
            closeModal('recipeSuggestionModal');
            closeModal('zeroWasteModal');

            appState.points += points;
            appState.missionCompleted = true;

            document.getElementById('pointsEarned').textContent = `+${points} punti`;
            showModal('missionCompleteModal');

            updateUI();

            setTimeout(() => {
                const skipBtn = document.querySelector('.ad-skip');
                if (skipBtn) {
                    skipBtn.textContent = 'Salta';
                    skipBtn.style.background = '#4CAF50';
                }
            }, 3000);
        }

        function skipAd() {
            const adBanner = document.querySelector('.ad-banner');
            if (adBanner) adBanner.style.display = 'none';
        }

        function closeMissionComplete() {
            closeModal('missionCompleteModal');

            const missionContent = document.getElementById('missionContent');
            if (missionContent) {
                missionContent.innerHTML = `
                    <div class="mission-description" style="color: #4CAF50; text-align: center;">
                        ‚úÖ <strong>Mission Completata!</strong><br>
                        Torna domani per una nuova sfida
                    </div>
                    <button class="btn-primary" disabled style="opacity: 0.5;">
                        COMPLETATA PER OGGI
                    </button>
                `;
            }
        }

        // HYBRID MODEL - Navigation & Mock Data

        // Mock Data
        const mockData = {
            user: {
                streak: 1,
                points: 30,
                level: "Novizio"
            },

            suggestedMission: {
                type: "chef_di_oggi",
                title: "Chef di oggi",
                emoji: "üë®‚Äçüç≥",
                points: 30,
                bonus: 10
            },

            productsToUse: [
                { name: "Mozzarella", emoji: "üßÄ" },
                { name: "Pomodori", emoji: "üçÖ" },
                { name: "Latte", emoji: "ü•õ" }
            ],

            otherMissions: [
                { id: "scatta", title: "Scatta & Scopri", emoji: "üì∏", points: 20 },
                { id: "spesa", title: "Spesa Smart", emoji: "üßæ", points: 25 },
                { id: "zero", title: "Zero Spreco", emoji: "‚ö†Ô∏è", points: 10 },
                { id: "frigo", title: "Frigo Check", emoji: "‚úÖ", points: 5 }
            ],

            todayStats: {
                co2: "150g",
                money: "‚Ç¨8"
            }
        };

        // Navigation Functions
        function startChefMission() {
            // Avvia la mission Chef di oggi (gi√† implementata)
            startMission();
        }

        function openPlaceholder(missionId) {
            // Nascondi main app
            document.getElementById('mainApp').style.display = 'none';

            // Mostra placeholder corrispondente
            const placeholderEl = document.getElementById(`placeholder-${missionId}`);
            if (placeholderEl) {
                placeholderEl.classList.remove('hidden');
            }
        }

        function goBackHome() {
            // Nascondi tutti i placeholder
            document.querySelectorAll('.placeholder-screen').forEach(el => {
                el.classList.add('hidden');
            });

            // Mostra main app
            document.getElementById('mainApp').style.display = 'block';
        }

        // Easter egg - tap logo 3 times
        let logoTaps = 0;
        document.addEventListener('DOMContentLoaded', function() {
            const headers = document.querySelectorAll('.onboarding-icon');
            headers.forEach(header => {
                header.addEventListener('click', function() {
                    logoTaps++;
                    if (logoTaps === 3) {
                        alert("ü•ö Easter Egg!\n\nüë®‚Äçüíª Onboarding Prototype v1.0\nüöÄ Built for testing\nüíö Zero maintenance, maximum value!");
                        logoTaps = 0;
                    }
                    setTimeout(() => { logoTaps = 0; }, 2000);
                });
            });
        });
    </script>
</body>
</html>